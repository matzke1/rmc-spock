package: readline
versions: [ 5.0, 5.1, 5.2, 6.0, 6.1, 6.2, 6.3, 7.0 ]

dependencies:
  - version: ">=4"
    build: gnu89-compiler
    install: []

download:
  - version: ">=4"
    shell: |
        # wget seems to get stuck, but curl works fine
        curl "ftp://ftp.cwru.edu/pub/bash/readline-$PACKAGE_VERSION.tar.gz" |tar xzf -
        mv readline* download
        tar cf - download |gzip -9 >download.tar.gz

install:
  - version: ">=4"
    shell: |
        cc --spock-triplet

        cd download
        CC=cc ./configure --prefix="$PACKAGE_ROOT" --enable-shared
        make -j$PARALLELISM
        make install

        spock-export LD_LIBRARY_PATH  "$PACKAGE_ROOT/lib"
        spock-export READLINE_LIBDIRS "$PACKAGE_ROOT/lib"
        spock-export READLINE_INCDIRS "$PACKAGE_ROOT/include"
