package: libgraphicsmagick
versions: [ 1.3.17, 1.3.18, 1.3.19, 1.3.20, 1.3.21, 1.3.22, 1.3.23, 1.3.24, 1.3.25 ]

dependencies:
  - version: ">=1.3"
    #FIXME: aught to depende on libgomp, libbz2, liblzma, X libraries, libICE, libXext, libdps, -ldpstk, liblcms2, libpng12,
    #       libjpeg libjasper, libfreetype, libtiff, libjbig, libxml2, libwmflite
    install: [ c-compiler, c++-compiler,zlib ]
    build: []

variables:
  - version: ">=1.3"
    download_url: "https://sourceforge.net/projects/graphicsmagick/files/graphicsmagick/$PACKAGE_VERSION/GraphicsMagick-$PACKAGE_VERSION.tar.gz/download"

download:
  - version: ">=1.3"
    shell: |
        wget -O - "$download_url" |tar xzf -
        mv GraphicsMagick-* download
        tar cf - download |gzip -9 >download.tar.gz

install:
  - version: ">=1.3"
    shell: |
        cc --spock-triplet
        c++ --spock-triplet

        cd download
        CC=cc CXX=c++ ./configure --prefix="$PACKAGE_ROOT" --enable-shared
        make -j$PARALLELISM
        make install

        spock-export LIBGRAPHICSMAGICK_LIBDIRS "$PACKAGE_ROOT/lib"
        spock-export LIBGRAPHICSMAGICK_INCDIRS "$PACKAGE_ROOT/include"
        spock-export LD_LIBRARY_PATH           "$PACKAGE_ROOT/lib"
